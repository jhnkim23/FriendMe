{"ast":null,"code":"var _jsxFileName = \"/Users/johnkim/Desktop/cs/FriendMe/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // const [radius, setRadius] = useState(1);\n  // const [introduction, setIntroduction] = useState(\"\");\n  // console.log(radius);\n  // console.log(introduction);\n  var radius = 1;\n  var introduction = \"\";\n  var peerConnection;\n  var localStream;\n  var remoteStream;\n  useEffect(() => {\n    initialize();\n  }, []);\n  async function initialize() {\n    const configuration = {\n      'iceServers': [{\n        'urls': 'stun:stun.l.google.com:19302'\n      }]\n    };\n    peerConnection = new RTCPeerConnection(configuration);\n    localStream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    });\n    remoteStream = new MediaStream();\n    var video1 = document.getElementById('user1');\n    var video2 = document.getElementById('user2');\n    video1.srcObject = localStream;\n    video2.srcObject = remoteStream;\n    localStream.getTracks().forEach(async track => {\n      await peerConnection.addTrack(track, localStream);\n    });\n    peerConnection.ontrack = event => {\n      event.streams[0].getTracks().forEach(track => {\n        remoteStream.addTrack(track);\n      });\n    };\n    peerConnection.addEventListener('connectionstatechange', e => {\n      if (peerConnection.connectionState === 'connected') {\n        console.log('connected');\n      }\n    });\n  }\n  async function Create_Offer() {\n    peerConnection.onicecandidate = async event => {\n      if (event.candidate) {\n        axios.post('http://localhost:8080/add_ice_candidate', {\n          'client': {\n            'info': introduction,\n            'radius': radius,\n            'lat': 10,\n            'lon': 10\n          },\n          'iceCandidate': event.candidate\n        }).then(res => {\n          console.log(res.data);\n        });\n      }\n    };\n    const offer = await peerConnection.createOffer({\n      iceRestart: true\n    });\n    await peerConnection.setLocalDescription(offer);\n  }\n  async function Create_Answer(offer, iceCandidates) {\n    peerConnection.onicecandidate = async event => {\n      if (event.candidate) {\n        axios.post('http://localhost:8080/add_ice_candidate', {\n          'client': {\n            'info': introduction,\n            'radius': radius,\n            'lat': 10,\n            'lon': 10\n          },\n          'iceCandidate': event.candidate\n        }).then(res => {\n          console.log(res.data);\n        });\n      }\n    };\n    offer = JSON.parse(offer);\n    await peerConnection.setRemoteDescription(offer);\n    for (var i = 0; i < iceCandidates.length; i++) await peerConnection.addIceCandidate(iceCandidates[i]);\n    let answer = await peerConnection.createAnswer();\n    await peerConnection.setLocalDescription(answer);\n\n    //This might be better if the method was like split in two\n    let SDP = [null, JSON.stringify(peerConnection.localDescription)];\n    console.log(\"answer\", SDP);\n    console.log(\"p2p localstreams\", peerConnection.getLocalStreams());\n    console.log(\"p2p remotestreams\", peerConnection.getRemoteStreams());\n    console.log(\"localstream\", localStream);\n    console.log(\"remotestream\", remoteStream);\n    await axios.post('http://localhost:8080/add_SDP', {\n      'client': {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      },\n      'SDP': SDP\n    }).then(res => {\n      console.log(res.data);\n    });\n  }\n  async function Add_To_Matched(key, value) {\n    axios.post('http://localhost:8080/add_matched', {\n      'key': key,\n      'value': value\n    }).then(res => {\n      res = res.data;\n      let message = res['message'];\n      console.log(\"check\");\n      console.log(key);\n      if (message == \"added key value pair successfully to matched\") {\n        Check_If_Matched(false);\n      } else {\n        console.log(message);\n        console.log(\"something in the backend is broken I think, or the key value params you're passing are wrong\");\n      }\n    });\n  }\n  async function Add_To_Waitlist() {\n    await Create_Offer();\n    let SDP = [JSON.stringify(peerConnection.localDescription), null];\n    console.log(SDP);\n    axios.post('http://localhost:8080/add_to_waitlist', {\n      'client': {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      },\n      'SDP': SDP\n    }).then(res => {\n      console.log(res.data);\n      Check_If_Matched(true);\n    });\n  }\n  async function Radius_Match() {\n    console.log(introduction);\n    console.log(radius);\n    axios.post('http://localhost:8080/radius_match', {\n      'info': introduction,\n      'radius': radius,\n      'lat': 10,\n      'lon': 10\n    }).then(async res => {\n      res = res.data;\n      let message = res['message'];\n      if (message == 'Continue') Radius_Match();else if (message == 'EOL') Add_To_Waitlist();else {\n        console.log('match');\n        let offer = message['SDP'][0];\n        let iceCandidates = message['iceCandidates'];\n        await Create_Answer(offer, iceCandidates);\n        console.log(message);\n        console.log(introduction);\n        Add_To_Matched(message['client'], {\n          'info': introduction,\n          'radius': radius,\n          'lat': 10,\n          'lon': 10\n        });\n      }\n    });\n  }\n  async function Add_Answer(answer, answer_from, iceCandidates) {\n    answer = JSON.parse(answer);\n    await peerConnection.setRemoteDescription(answer);\n    console.log(iceCandidates);\n    for (var i = 0; i < iceCandidates.length; i++) await peerConnection.addIceCandidate(iceCandidates[i]);\n    console.log('Add answer triggered');\n    //Add 6's SDP offer to 2's remote stream\n    //let SDP = [JSON.stringify(peerConnection.localDescription), null];\n\n    // need polling \n\n    // let answer = JSON.parse(document.getElementById('answer-sdp').value)\n    // console.log('answer:', answer)\n    // if (!peerConnection.currentRemoteDescription){\n    //     peerConnection.setRemoteDescription(answer);\n    // }\n\n    //let remote_user = null\n    let remote_user = answer_from;\n    //Get 6's data first from matched dictionary by querying 2:6\n\n    //Remove 2 from waiting list\n    axios.post('http://localhost:8080/remove_waitlist', remote_user).then(res => {\n      console.log(res.data['message']);\n    });\n\n    //Remove 2 from to_be_matched\n    axios.post('http://localhost:8080/remove_to_be_matched', {\n      'info': introduction,\n      'radius': radius,\n      'lat': 10,\n      'lon': 10\n    }).then(res => {\n      console.log(res.data);\n    });\n\n    //add 6:2 -> signifies to client 1 that client 2 has agreed\n    axios.post('http://localhost:8080/add_matched', {\n      'key': remote_user,\n      'value': {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      }\n    }).then(res => {\n      console.log(res.data);\n    });\n\n    //then remove 2:6\n    axios.post('http://localhost:8080/remove_matched', {\n      'key': {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      },\n      'value': remote_user\n    }).then(res => {\n      console.log(res.data);\n    });\n  }\n  async function Check_If_Matched(sender) {\n    let poll_response;\n    await axios.post('http://localhost:8080/check_for_matched', {\n      'info': introduction,\n      'radius': radius,\n      'lat': 10,\n      'lon': 10\n    }).then(res => {\n      poll_response = res.data;\n    });\n    if (poll_response['message'] == 'Not Found') {\n      console.log('not found');\n      setTimeout(function () {\n        Check_If_Matched(sender);\n      }, 1000);\n    } else {\n      console.log('STOP POLLING' + sender);\n      let answer_from = poll_response['message']['client'];\n      if (sender) {\n        console.log(answer_from);\n        let answer = poll_response['message']['SDP'][1];\n        console.log(answer);\n        let iceCandidates = poll_response['message']['iceCandidates'];\n        await Add_Answer(answer, answer_from, iceCandidates);\n        console.log(peerConnection.remoteDescription);\n        console.log(peerConnection.localDescription);\n        console.log(peerConnection.getLocalStreams());\n        console.log(peerConnection.getRemoteStreams());\n        console.log(localStream);\n        console.log(remoteStream);\n      } else {\n        axios.post(\"http://localhost:8080/remove_SDP\", answer_from);\n        axios.post(\"http://localhost:8080/remove_SDP\", {\n          'info': introduction,\n          'radius': radius,\n          'lat': 10,\n          'lon': 10\n        });\n        axios.post(\"http://localhost:8080/remove_ice_candidates\", answer_from);\n        axios.post(\"http://localhost:8080/remove_ice_candidates\", {\n          'info': introduction,\n          'radius': radius,\n          'lat': 10,\n          'lon': 10\n        });\n      }\n    }\n  }\n  async function QueryUser(e) {\n    e.preventDefault();\n    await Radius_Match();\n  }\n  function QueryUserTesting(e) {\n    e.preventDefault();\n    introduction = 'test2';\n    radius = 5;\n    Radius_Match();\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PeerConnection\",\n      children: [/*#__PURE__*/_jsxDEV(SubmitButton, {\n        title: \"find\",\n        onClick: QueryUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        title: \"find2\",\n        onClick: QueryUserTesting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        title: \"test\",\n        onClick: Add_Answer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"VideoPlayers\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        className: \"video-player\",\n        id: \"user1\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        className: \"video-player\",\n        id: \"user2\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nfunction SubmitButton({\n  title,\n  onClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onClick,\n    children: [\" \", title, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 363,\n    columnNumber: 5\n  }, this);\n}\n\n// function VideoPlayer({ref, id}) {\n//   return (\n//     <video ref={ref} class=\"video-player\" id={id} autoplay playsinline></video>\n//   )\n// }\n_c2 = SubmitButton;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"SubmitButton\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","radius","introduction","peerConnection","localStream","remoteStream","initialize","configuration","RTCPeerConnection","navigator","mediaDevices","getUserMedia","video","audio","MediaStream","video1","document","getElementById","video2","srcObject","getTracks","forEach","track","addTrack","ontrack","event","streams","addEventListener","e","connectionState","console","log","Create_Offer","onicecandidate","candidate","post","then","res","data","offer","createOffer","iceRestart","setLocalDescription","Create_Answer","iceCandidates","JSON","parse","setRemoteDescription","i","length","addIceCandidate","answer","createAnswer","SDP","stringify","localDescription","getLocalStreams","getRemoteStreams","Add_To_Matched","key","value","message","Check_If_Matched","Add_To_Waitlist","Radius_Match","Add_Answer","answer_from","remote_user","sender","poll_response","setTimeout","remoteDescription","QueryUser","preventDefault","QueryUserTesting","children","className","SubmitButton","title","onClick","fileName","_jsxFileName","lineNumber","columnNumber","id","autoPlay","muted","playsInline","_c","_c2","$RefreshReg$"],"sources":["/Users/johnkim/Desktop/cs/FriendMe/frontend/src/App.js"],"sourcesContent":["import React, { useState , useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  // const [radius, setRadius] = useState(1);\n  // const [introduction, setIntroduction] = useState(\"\");\n  // console.log(radius);\n  // console.log(introduction);\n  var radius = 1;\n  var introduction = \"\";\n  var peerConnection;\n  var localStream;\n  var remoteStream;\n\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  async function initialize() {\n    const configuration = {'iceServers' : [{'urls': 'stun:stun.l.google.com:19302'}]}\n    peerConnection = new RTCPeerConnection(configuration);\n    localStream = await navigator.mediaDevices.getUserMedia({video:true, audio:true});\n    remoteStream = new MediaStream();\n\n    var video1 = document.getElementById('user1');\n    var video2 = document.getElementById('user2');\n\n    video1.srcObject = localStream;\n    video2.srcObject = remoteStream;\n\n    localStream.getTracks().forEach(async (track) => {\n        await peerConnection.addTrack(track, localStream);\n    });\n\n    peerConnection.ontrack = (event) => {\n        event.streams[0].getTracks().forEach((track) => {\n          remoteStream.addTrack(track);\n        });\n    };\n\n    peerConnection.addEventListener('connectionstatechange', e => {\n      if (peerConnection.connectionState === 'connected') {\n        console.log('connected');\n      }\n    });\n  }\n\n  async function Create_Offer() {\n    peerConnection.onicecandidate = async (event) => {\n      if (event.candidate) {\n        axios.post('http://localhost:8080/add_ice_candidate',\n          {\n            'client':\n            {\n              'info': introduction,\n              'radius': radius,\n              'lat': 10,\n              'lon': 10\n            },\n            'iceCandidate': event.candidate\n          }).then(res => {\n            console.log(res.data)\n          });\n      }\n    }\n    const offer = await peerConnection.createOffer({ iceRestart: true});\n    await peerConnection.setLocalDescription(offer);\n  }\n\n  async function Create_Answer(offer, iceCandidates){\n    peerConnection.onicecandidate = async (event) => {\n      if (event.candidate) {\n        axios.post('http://localhost:8080/add_ice_candidate',\n          {\n            'client':\n            {\n              'info': introduction,\n              'radius': radius,\n              'lat': 10,\n              'lon': 10\n            },\n            'iceCandidate': event.candidate\n          }).then(res => {\n            console.log(res.data)\n          });\n      }\n    }\n\n    offer = JSON.parse(offer);\n    await peerConnection.setRemoteDescription(offer);\n\n    for (var i = 0; i < iceCandidates.length; i++)\n      await peerConnection.addIceCandidate(iceCandidates[i]);\n\n    let answer = await peerConnection.createAnswer();\n    await peerConnection.setLocalDescription(answer);\n\n    //This might be better if the method was like split in two\n    let SDP = [null, JSON.stringify(peerConnection.localDescription)];\n    \n    console.log(\"answer\", SDP)\n    console.log(\"p2p localstreams\", peerConnection.getLocalStreams());\n    console.log(\"p2p remotestreams\", peerConnection.getRemoteStreams());\n    console.log(\"localstream\", localStream);\n    console.log(\"remotestream\", remoteStream);\n\n\n    await axios.post('http://localhost:8080/add_SDP',\n    {\n      'client':\n      {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      },\n      'SDP': SDP\n    }).then(res => {\n      console.log(res.data)\n    });\n  }\n\n  async function Add_To_Matched(key, value) {\n    axios.post('http://localhost:8080/add_matched',{\n      'key': key,\n      'value': value\n    }).then(res => {\n      res = res.data;\n      let message = res['message'];\n      \n      console.log(\"check\");\n      console.log(key);\n      \n      if (message ==\"added key value pair successfully to matched\"){\n        Check_If_Matched(false);\n      }\n      else{\n        console.log(message)\n        console.log(\"something in the backend is broken I think, or the key value params you're passing are wrong\")\n      }\n    });\n\n  }\n\n  async function Add_To_Waitlist() {\n    await Create_Offer();\n    \n    let SDP = [JSON.stringify(peerConnection.localDescription), null];\n    console.log(SDP);\n\n    axios.post('http://localhost:8080/add_to_waitlist',\n        {\n          'client' :\n          {\n          'info':introduction,\n          'radius':radius,\n          'lat':10,\n          'lon':10,\n          },\n          'SDP' : SDP,\n        }).then(res => {\n          console.log(res.data);\n          Check_If_Matched(true);\n    });\n  }\n\n  async function Radius_Match() {\n    console.log(introduction);\n    console.log(radius);\n    axios.post('http://localhost:8080/radius_match', \n      {\n        'info':introduction,\n        'radius':radius,\n        'lat':10,\n        'lon':10\n      }).then(async res => {\n        res = res.data;\n        let message = res['message'];\n        if (message == 'Continue')\n          Radius_Match();\n        else if (message == 'EOL')\n          Add_To_Waitlist();\n        else {\n          console.log('match');\n          let offer = message['SDP'][0];\n          let iceCandidates = message['iceCandidates'];\n\n          await Create_Answer(offer, iceCandidates);\n          console.log(message);\n          console.log(introduction);\n          Add_To_Matched(message['client'], \n          {\n            'info': introduction,\n            'radius': radius,\n            'lat': 10,\n            'lon': 10\n          })\n        }\n    });\n  }\n\n  async function Add_Answer(answer, answer_from, iceCandidates) {\n    answer = JSON.parse(answer);\n    await peerConnection.setRemoteDescription(answer);\n    console.log(iceCandidates)\n\n    for (var i = 0; i < iceCandidates.length; i++)\n      await peerConnection.addIceCandidate(iceCandidates[i]);\n\n    console.log('Add answer triggered');\n    //Add 6's SDP offer to 2's remote stream\n    //let SDP = [JSON.stringify(peerConnection.localDescription), null];\n\n    // need polling \n\n    // let answer = JSON.parse(document.getElementById('answer-sdp').value)\n    // console.log('answer:', answer)\n    // if (!peerConnection.currentRemoteDescription){\n    //     peerConnection.setRemoteDescription(answer);\n    // }\n\n    //let remote_user = null\n    let remote_user = answer_from;\n    //Get 6's data first from matched dictionary by querying 2:6\n\n\n      //Remove 2 from waiting list\n    axios.post('http://localhost:8080/remove_waitlist', \n    remote_user).then(res => {\n      console.log(res.data['message']);\n    });\n\n    //Remove 2 from to_be_matched\n    axios.post('http://localhost:8080/remove_to_be_matched', \n      {\n        'info':introduction,\n        'radius':radius,\n        'lat':10,\n        'lon':10,\n      }).then(res => {\n        console.log(res.data);\n      });\n\n    //add 6:2 -> signifies to client 1 that client 2 has agreed\n    axios.post('http://localhost:8080/add_matched',\n      {\n        'key' : remote_user,\n        'value' : {\n          'info':introduction,\n          'radius':radius,\n          'lat':10,\n          'lon':10,\n        }\n      }\n    ).then(res => {\n      console.log(res.data);\n    });\n\n    //then remove 2:6\n    axios.post('http://localhost:8080/remove_matched',\n      {\n        'key' : {\n          'info': introduction,\n          'radius' : radius,\n          'lat' : 10,\n          'lon' : 10\n        },\n        'value' : remote_user\n      }\n    ).then(res => {\n      console.log(res.data);\n    });\n  }\n\n  async function Check_If_Matched(sender) {\n    let poll_response;\n    await axios.post('http://localhost:8080/check_for_matched',\n      {\n        'info':introduction,\n        'radius':radius,\n        'lat':10,\n        'lon':10,\n      }).then(res => {\n        poll_response = res.data;\n    });\n\n    if (poll_response['message'] == 'Not Found') {\n      console.log('not found');\n      setTimeout(function() {Check_If_Matched(sender);}, 1000);\n    }\n    else {\n      console.log('STOP POLLING' + sender);\n      let answer_from = poll_response['message']['client']\n      if (sender) {\n        console.log(answer_from);\n        let answer = poll_response['message']['SDP'][1];\n        console.log(answer);\n\n        let iceCandidates = poll_response['message']['iceCandidates'];\n\n        await Add_Answer(answer, answer_from, iceCandidates);\n        console.log(peerConnection.remoteDescription);\n        console.log(peerConnection.localDescription);\n        \n        console.log(peerConnection.getLocalStreams());\n        console.log(peerConnection.getRemoteStreams());\n        console.log(localStream);\n        console.log(remoteStream);\n      }\n      else {\n        axios.post(\"http://localhost:8080/remove_SDP\", answer_from);\n        axios.post(\"http://localhost:8080/remove_SDP\", \n        {\n          'info': introduction,\n          'radius': radius,\n          'lat': 10,\n          'lon': 10,\n        });\n        axios.post(\"http://localhost:8080/remove_ice_candidates\", answer_from);\n        axios.post(\"http://localhost:8080/remove_ice_candidates\", \n        {\n          'info': introduction,\n          'radius': radius,\n          'lat': 10,\n          'lon': 10\n        });\n      }\n    }\n  }\n\n\n  async function QueryUser(e) {\n    e.preventDefault();\n    await Radius_Match();\n  }\n\n\n  function QueryUserTesting(e){\n    e.preventDefault();\n    introduction = 'test2'\n    radius = 5;\n    Radius_Match();\n  }\n\n  return (\n    <>\n      <div className=\"PeerConnection\">\n        <SubmitButton title=\"find\" onClick={QueryUser}/>\n        <SubmitButton title=\"find2\" onClick={QueryUserTesting}/>\n        <SubmitButton title=\"test\" onClick={Add_Answer}/>\n      </div>\n      <div className=\"VideoPlayers\">\n        <video className=\"video-player\" id=\"user1\" autoPlay muted playsInline></video>\n        <video className=\"video-player\" id=\"user2\" autoPlay muted playsInline></video>\n      </div>\n    </>\n  );\n}\n\nfunction SubmitButton({title, onClick}) {\n  return (\n    <button onClick={onClick}> {title} </button>\n  )\n}\n\n// function VideoPlayer({ref, id}) {\n//   return (\n//     <video ref={ref} class=\"video-player\" id={id} autoplay playsinline></video>\n//   )\n// }\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}