{"ast":null,"code":"var _jsxFileName = \"/Users/johnkim/Desktop/cs/FriendMe/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [radius, setRadius] = useState(1);\n  const [introduction, setIntroduction] = useState(\"\");\n  var peerConnection;\n  var localStream;\n  var remoteStream;\n  useEffect(() => {\n    initialize();\n    console.log(peerConnection, localStream, remoteStream);\n  }, []);\n  async function initialize() {\n    peerConnection = new RTCPeerConnection();\n    localStream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: false\n    });\n    remoteStream = new MediaStream();\n\n    // document.getElementById('user-1').srcObject = localStream;\n    // document.getElementById('user-2').srcObject = remoteStream;\n\n    localStream.getTracks().forEach(track => {\n      peerConnection.addTrack(track, localStream);\n    });\n    peerConnection.ontrack = event => {\n      event.streams[0].getTracks().forEach(track => {\n        remoteStream.addTrack(track);\n      });\n    };\n  }\n  async function Create_Offer() {\n    const offer = await peerConnection.createOffer();\n    await peerConnection.setLocalDescription(offer);\n  }\n  function Match_Poll() {\n    async function Check_If_Matched() {\n      let poll_response;\n      await axios.post('http://localhost:8080/check_for_matched', {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      }).then(res => {\n        poll_response = res.data;\n      });\n      if (poll_response['message'] == 'Not Found') {\n        console.log('not found');\n        setInterval(\"Check_If_Matched\", 1000);\n      } else {\n        console.log('matched');\n      }\n    }\n    Check_If_Matched();\n  }\n  async function Add_To_Waitlist() {\n    await Create_Offer();\n    let SDP = [JSON.stringify(peerConnection.localDescription), null];\n    console.log(SDP);\n    axios.post('http://localhost:8080/add_to_waitlist', {\n      'client': {\n        'info': introduction,\n        'radius': radius,\n        'lat': 10,\n        'lon': 10\n      },\n      'SDP': SDP\n    }).then(res => {\n      Match_Poll();\n    });\n  }\n  async function Radius_Match() {\n    axios.post('http://localhost:8080/radius_match', {\n      'info': introduction,\n      'radius': radius,\n      'lat': 10,\n      'lon': 10\n    }).then(res => {\n      res = res.data;\n      let message = res['message'];\n      if (message == 'Continue') Radius_Match();else if (message == 'EOL') Add_To_Waitlist();else {\n        console.log('match');\n      }\n    });\n  }\n  async function QueryUser(e) {\n    e.preventDefault();\n    Radius_Match();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n      title: \"find\",\n      onClick: QueryUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"9Xz6W7ohDYTvrmIRx28neFmBx94=\");\n_c = App;\nfunction SubmitButton({\n  title,\n  onClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onClick,\n    children: [\" \", title, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n_c2 = SubmitButton;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"SubmitButton\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","App","_s","radius","setRadius","introduction","setIntroduction","peerConnection","localStream","remoteStream","initialize","console","log","RTCPeerConnection","navigator","mediaDevices","getUserMedia","video","audio","MediaStream","getTracks","forEach","track","addTrack","ontrack","event","streams","Create_Offer","offer","createOffer","setLocalDescription","Match_Poll","Check_If_Matched","poll_response","post","then","res","data","setInterval","Add_To_Waitlist","SDP","JSON","stringify","localDescription","Radius_Match","message","QueryUser","e","preventDefault","className","children","SubmitButton","title","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","_c2","$RefreshReg$"],"sources":["/Users/johnkim/Desktop/cs/FriendMe/frontend/src/App.js"],"sourcesContent":["import React, { useState , useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  const [radius, setRadius] = useState(1);\n  const [introduction, setIntroduction] = useState(\"\");\n  var peerConnection;\n  var localStream;\n  var remoteStream;\n\n  useEffect(() => {\n    initialize();\n    console.log(peerConnection, localStream, remoteStream)\n  }, []);\n\n  async function initialize() {\n    peerConnection = new RTCPeerConnection();\n    localStream = await navigator.mediaDevices.getUserMedia({video:true, audio:false});\n    remoteStream = new MediaStream();\n\n    // document.getElementById('user-1').srcObject = localStream;\n    // document.getElementById('user-2').srcObject = remoteStream;\n\n    localStream.getTracks().forEach((track) => {\n        peerConnection.addTrack(track, localStream);\n    });\n\n    peerConnection.ontrack = (event) => {\n        event.streams[0].getTracks().forEach((track) => {\n        remoteStream.addTrack(track);\n        });\n    };\n  }\n\n  async function Create_Offer() {\n    const offer = await peerConnection.createOffer();\n    await peerConnection.setLocalDescription(offer);\n  }\n\n  function Match_Poll() {\n    async function Check_If_Matched() {\n      let poll_response;\n      await axios.post('http://localhost:8080/check_for_matched',\n        {\n          'info':introduction,\n          'radius':radius,\n          'lat':10,\n          'lon':10,\n        }).then(res => {\n          poll_response = res.data;\n      });\n      \n      if (poll_response['message'] == 'Not Found') {\n        console.log('not found');\n        setInterval(\"Check_If_Matched\", 1000);\n      }\n      else {\n        console.log('matched');\n      }\n    }\n    \n    Check_If_Matched();\n  }\n\n  async function Add_To_Waitlist() {\n    await Create_Offer();\n    let SDP = [JSON.stringify(peerConnection.localDescription), null];\n    console.log(SDP);\n    axios.post('http://localhost:8080/add_to_waitlist',\n        {\n          'client' :\n          {\n          'info':introduction,\n          'radius':radius,\n          'lat':10,\n          'lon':10,\n          },\n          'SDP' : SDP\n        }).then(res => {\n          Match_Poll();\n    });\n  }\n\n  async function Radius_Match() {\n    axios.post('http://localhost:8080/radius_match', \n      {\n        'info':introduction,\n        'radius':radius,\n        'lat':10,\n        'lon':10\n      }).then(res => {\n        res = res.data;\n        let message = res['message'];\n        if (message == 'Continue')\n          Radius_Match();\n        else if (message == 'EOL')\n          Add_To_Waitlist();\n        else {\n          console.log('match');\n        }\n    });\n  }\n\n  async function QueryUser(e) {\n    e.preventDefault();\n    Radius_Match();\n  }\n\n  return (\n    <div className=\"App\">\n      <SubmitButton title=\"find\" onClick={QueryUser}/>\n    </div>\n  );\n}\n\nfunction SubmitButton({title, onClick}) {\n  return (\n    <button onClick={onClick}> {title} </button>\n  )\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}